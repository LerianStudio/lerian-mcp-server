# ===========================================
# Lerian MCP Server Environment Configuration
# ===========================================
# Copy this file to .env and configure your values
# SECURITY: Never commit .env files to version control

# ===========================================
# MIDAZ API CONFIGURATION
# ===========================================

# Primary API key for Midaz services (used for both onboarding and transaction APIs)
# For local development with Docker containers, leave empty or comment out
# For production, use your actual API key
MIDAZ_API_KEY=

# Individual service API keys (optional - overrides MIDAZ_API_KEY for specific services)
# MIDAZ_ONBOARDING_API_KEY=your_onboarding_api_key_here
# MIDAZ_TRANSACTION_API_KEY=your_transaction_api_key_here

# Backend service URLs
# Local development (Docker containers)
MIDAZ_ONBOARDING_URL=http://localhost:3000
MIDAZ_TRANSACTION_URL=http://localhost:3001

# Production URLs (uncomment for production use)
# MIDAZ_ONBOARDING_URL=https://api.midaz.io/onboarding
# MIDAZ_TRANSACTION_URL=https://api.midaz.io/transaction

# Unified backend URL (sets both onboarding and transaction URLs)
# MIDAZ_BACKEND_URL=https://api.midaz.io

# ===========================================
# SECURITY CONFIGURATION
# ===========================================

# ⚠️ CRITICAL: Pagination Cursor Signing Secret (REQUIRED for production)
# Used to cryptographically sign pagination cursors (MED-005 fix)
# Generate with: openssl rand -hex 32
# OR: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# IMPORTANT:
# - Must be 64 characters (32 bytes hex-encoded)
# - Must be the same across ALL server instances (load balancer, replicas)
# - Changing this value invalidates all existing pagination cursors
# - Without this, pagination breaks on every restart
#
# Example: 7f4e9c8a2b1d6f3e5a8c9d2b4f7e1a3c5b8d9e2f4a7c1b6d3e8f5a9c2d4b7e1a
CURSOR_SECRET=

# ⚠️ CRITICAL: Cache Encryption Key (REQUIRED if caching enabled)
# Used to encrypt cached OAuth tokens and API responses
# Generate with: openssl rand -hex 32
# OR: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# IMPORTANT:
# - Must be 64 characters (32 bytes hex-encoded)
# - Changing this value invalidates all cached data
# - Server will generate random key if not set (breaks cache on restart)
#
# Example: 1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b
CACHE_ENCRYPTION_KEY=

# OAuth2 credentials (alternative to API key authentication)
# MIDAZ_CLIENT_ID=your_oauth_client_id
# MIDAZ_CLIENT_SECRET=your_oauth_client_secret

# ===========================================
# SERVER CONFIGURATION
# ===========================================

# Backend connection settings
MIDAZ_BACKEND_TIMEOUT=30000
MIDAZ_BACKEND_RETRIES=3

# Development mode settings
MIDAZ_USE_STUBS=false
MIDAZ_LOG_LEVEL=info
MIDAZ_DETAILED_LOGS=false

# Documentation service URL
MIDAZ_DOCS_URL=https://docs.midaz.io

# ===========================================
# DEVELOPMENT & DEBUGGING
# ===========================================

# Node.js environment
NODE_ENV=development

# Enable debug logging for specific modules
# DEBUG=midaz:*

# ===========================================
# SECURITY AUDIT CONFIGURATION
# ===========================================

# Security scanning settings
SECURITY_SCAN_ENABLED=true
SECURITY_SCAN_SCHEDULE=0 2 * * 1  # Weekly on Monday at 2 AM
SECURITY_AUDIT_WEBHOOK_URL=your_webhook_url_for_security_alerts

# Rate limiting settings
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=60000

# ===========================================
# MONITORING & OBSERVABILITY
# ===========================================

# Application monitoring
# SENTRY_DSN=your_sentry_dsn_here
# DATADOG_API_KEY=your_datadog_api_key_here

# Health check settings
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# ===========================================
# LOGGING & METRICS CONFIGURATION
# ===========================================

# Error logging to files (opt-in, disabled by default)
ERROR_LOGGING=false

# Performance tracking (opt-in, disabled by default)
PERFORMANCE_TRACKING=false

# Audit logging (opt-in, disabled by default)
AUDIT_LOGGING=false

# Metrics flushing to file (opt-in, disabled by default)
# When enabled, metrics are saved to ./logs/metrics-snapshot.json every 5 minutes
METRICS_FLUSH_ENABLED=false

# ===========================================
# PRODUCTION SECURITY SETTINGS
# ===========================================

# Enable additional security measures in production
ENABLE_SECURITY_HEADERS=true
ENABLE_REQUEST_VALIDATION=true
ENABLE_AUDIT_LOGGING=true

# Session security
SESSION_SECRET=your_session_secret_here
SESSION_TIMEOUT=3600000  # 1 hour in milliseconds

# ===========================================
# BACKUP & RECOVERY
# ===========================================

# Backup configuration
# BACKUP_ENCRYPTION_KEY=your_backup_encryption_key_here
# BACKUP_SCHEDULE=0 3 * * *  # Daily at 3 AM
# BACKUP_RETENTION_DAYS=30
